<!DOCTYPE html>

<html>
<head>
  <title>templates.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>templates.coffee</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>AppManager::templates = <span class="hljs-function">-&gt;</span>
<span class="hljs-function">
        <span class="hljs-title">getTemplate</span> = <span class="hljs-params">(p)</span> -&gt;</span>
                <span class="hljs-keyword">new</span> Promise (resolve, reject) -&gt;
                        _p = path.resolve <span class="hljs-string">"<span class="hljs-subst">#{path.join(__dirname)}</span>/../app/views/<span class="hljs-subst">#{p}</span>.pug"</span>
                        fs.readFile _p, <span class="hljs-string">'utf8'</span>, <span class="hljs-function"><span class="hljs-params">(err, content)</span> -&gt;</span>
                                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> err
                                        <span class="hljs-keyword">try</span>
                                                opt = {filename: _p, doctype:<span class="hljs-string">'html'</span>}
                                                html = pug.compile(content, opt)()
                                                result = component: {template: html}, name: p
                                                <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/_index/</span>
                                                        result.path = <span class="hljs-string">"/"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>GET /#/formularios/:uuid/stats
GET /#/formularios/:uuid/questions
GET /#/formularios/:uuid/responses</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^formularios_uuid_[a-z]+$/</span>
                                                        r = p.split(<span class="hljs-string">"_"</span>)
                                                        result.path = <span class="hljs-string">"/<span class="hljs-subst">#{r[<span class="hljs-number">0</span>]}</span>/:uuid/<span class="hljs-subst">#{r[<span class="hljs-number">2</span>]}</span>"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>GET /#/formularios/:uuid/responses/:token</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^formularios_uuid_\w+_[a-z]+$/</span>
                                                        r = p.split(<span class="hljs-string">"_"</span>)
                                                        result.path = <span class="hljs-string">"/<span class="hljs-subst">#{r[<span class="hljs-number">0</span>]}</span>/:uuid/<span class="hljs-subst">#{r[<span class="hljs-number">2</span>]}</span>/:token"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>GET /#/formularios/novo</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/formularios_novo/</span>
                                                        r = p.split(<span class="hljs-string">"_"</span>)
                                                        result.path = <span class="hljs-string">"/<span class="hljs-subst">#{r[<span class="hljs-number">0</span>]}</span>/novo"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>GET /#/boletos/:invoiceid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^boletos$/</span>
                                                        result.path = <span class="hljs-string">"/boletos"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>GET /#/boletos/:invoiceid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/boletos_id/</span>
                                                        r = p.split(<span class="hljs-string">"_"</span>)
                                                        result.path = <span class="hljs-string">"/boletos/:invoiceid"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>GET /#/conta/telefone/vincular</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^conta_\w+_\w+$/</span>
                                                        r = p.split(<span class="hljs-string">"_"</span>)
                                                        result.path = <span class="hljs-string">"/<span class="hljs-subst">#{r[<span class="hljs-number">0</span>]}</span>/:option/:action"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>GET /#/estudantes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^estudantes$/</span>
                                                        result.path = <span class="hljs-string">"/estudantes"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>GET /#/estudantes/:id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^estudantes_id$/</span>
                                                        result.path = <span class="hljs-string">"/estudantes/:id"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>GET /#/cursos</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^cursos$/</span>
                                                        result.path = <span class="hljs-string">"/cursos"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>GET /#/estudantes/:id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> p.match <span class="hljs-regexp">/^cursos_id$/</span>
                                                        result.path = <span class="hljs-string">"/cursos/:id"</span>
                                                        
                                                <span class="hljs-keyword">else</span> 
                                                        result.path = <span class="hljs-string">"/<span class="hljs-subst">#{p}</span>"</span>
                                                resolve result
                                        <span class="hljs-keyword">catch</span> e
                                                <span class="hljs-built_in">console</span>.log e
                                                reject e
                                <span class="hljs-keyword">else</span>
                                        reject err
                   
        @app.get <span class="hljs-string">'/templates/routes/:type'</span>, <span class="hljs-function"><span class="hljs-params">(req, res)</span> -&gt;</span>
<span class="hljs-function">                <span class="hljs-title">onSuccess</span> = <span class="hljs-params">(result)</span> -&gt;</span> res.json result
<span class="hljs-function">                <span class="hljs-title">onErr</span> = <span class="hljs-params">(err)</span> -&gt;</span> res.json err.message
                getTemplate(req.params[<span class="hljs-string">'type'</span>]).<span class="hljs-keyword">then</span>(onSuccess).<span class="hljs-keyword">catch</span>(onErr)

        @app.get <span class="hljs-string">'/templates/index/routes'</span>, <span class="hljs-function"><span class="hljs-params">(req, res)</span> -&gt;</span>
                res.json [
                        <span class="hljs-string">"_index"</span>,
                        <span class="hljs-string">"login"</span>,
                        <span class="hljs-string">"signup"</span>,
                        <span class="hljs-string">"resetPassword"</span>,
                        <span class="hljs-string">"confirm"</span>,
                        <span class="hljs-string">"conta"</span>,
                        <span class="hljs-string">"formularios"</span>
                        <span class="hljs-string">"estudantes"</span>
                        <span class="hljs-string">"cursos"</span>
                        <span class="hljs-string">"matriculas"</span>
                ]
                
        @app.get <span class="hljs-string">"/templates/index/page"</span>, <span class="hljs-function"><span class="hljs-params">(req, res)</span> -&gt;</span>
                res.send <span class="hljs-string">"""&lt;div&gt;
  &lt;vanessador-menu :autorizado='autorizado' :user='user'&gt;&lt;/vanessador-menu&gt;
  &lt;div class='container-fluid'&gt;
    &lt;div class='side-body'&gt;
      &lt;router-view :autorizado='autorizado' :user='user' :atualizar='atualizar' :estudantes='estudantes' :cursos='cursos' :formularios='formularios' :boletos='boletos' :modelos='modelos' :questions='questions' :responses='responses' :matriculas='matriculas' :turmas='turmas'&gt;&lt;/router-view&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;"""</span>

        @app.get <span class="hljs-string">"/templates/index/data"</span>, <span class="hljs-function"><span class="hljs-params">(req, res)</span> -&gt;</span>
                xlsCursos =
                        input_list: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'ABCDEFG'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Colunas'</span>}
                        input_min: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha inicial'</span>}
                        input_max: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'26'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha final'</span>}
                xlsEstudantes =
                        input_list: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'ABCDEFGHIJKLMNO'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Colunas'</span>}
                        input_min: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha inicial'</span>}
                        input_max: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'726'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha final'</span>}
                xlsFormularios =
                        input_list: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'AB'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Colunas'</span>}
                        input_min: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha inicial'</span>}
                        input_max: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'3'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha final'</span>}

                xlsMatriculas =
                        input_list: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'AB'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Colunas'</span>}
                        input_min: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'2'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha inicial'</span>}
                        input_max: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'3'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Linha final'</span>}

                formularios =
                        input_typeform_code: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'E20qGg'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Código typeform'</span>}
                        input_turma_code: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'-Ktm1CBbiRXF7OEUellX'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Código turma'</span>}
                        input_pagseguro_code: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'FD26E55B2D2D47D77457BFB0B6BCAA51'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Código pagseguro (campanha 100%, 75% ou 10%)'</span>}

                matriculas =
                        input_fk_turma: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'label'</span>:<span class="hljs-string">'ID turma'</span>}
                        input_fk_estudante: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'label'</span>:<span class="hljs-string">'ID estudante'</span>}
                        input_matriculado: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'checkbox'</span>, <span class="hljs-string">'label'</span>:<span class="hljs-string">'Matriculado?'</span>}
                        input_certificado: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'checkbox'</span>, <span class="hljs-string">'label'</span>:<span class="hljs-string">'Certificado?'</span>}

                estudantes =
                        input_nome: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'nome'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Nome'</span>}
                        input_email1: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'email1@dominio'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Email 1'</span>}
                        input_email2: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'email2@dominio'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Email 2'</span>}
                        input_email3: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'email3@dominio'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Email 3'</span>}
                        input_profissao: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'trabalho'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Profissão'</span>}
                        input_idade: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'8-80'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Idade'</span>}
                        input_genero: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'M/F/Outro'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Gênero'</span>}
                        input_telefone: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'12345678'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Telefone'</span>}
                        input_estado: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'propriedade'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Estado'</span>}
                        input_cidade: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'propriedade'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Cidade'</span>}
                        input_isAlumni: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'check'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'É Alumni?'</span>}

                cursos =
                        input_nome: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'nome'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Nome'</span>}
                        input_typeform_code: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'E20qGg'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Código typeform'</span>}
                        input_inicio_matricula: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'date'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Início das matrículas'</span>}
                        input_fim_matricula: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'date'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Fim das matrículas'</span>}
                        input_carga_horaria: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'6 hs'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Carga Horária'</span>}
                        input_quantidade_aulas: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'number'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'3'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Quantidade de Aulas'</span>}
                        input_data_inicio: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'date'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Data de início das aulas'</span>}
                        input_data_termino: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'date'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Data de término das aulas'</span>}
                        input_data_inicio_valor1: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'number'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Valor para data de início 1 (R$)'</span>}
                        input_data_inicio_valor2: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'number'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Valor para data de início 2 (R$)'</span>}
                        input_data_inicio_valor3: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'number'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Valor para data de início 3 (R$)'</span>}
                        input_valor_cheio: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'number'</span>, <span class="hljs-string">'placeholder'</span>:<span class="hljs-string">'200'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Valor Cheio (R$)'</span>}
                        input_link_valor1: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>: <span class="hljs-string">'https://pag.ae/12345'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Codigo Pagseguro 1'</span>}
                        input_link_valor2: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>: <span class="hljs-string">'https://pag.ae/45678'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Codigo Pagseguro 2'</span>}
                        input_link_valor3: {<span class="hljs-string">'type'</span>:<span class="hljs-string">'text'</span>, <span class="hljs-string">'placeholder'</span>: <span class="hljs-string">'https://pag.ae/90123'</span>, <span class="hljs-string">'label'</span>: <span class="hljs-string">'Codigo Pagseguro 3'</span>}
                res.json {
                        search:<span class="hljs-string">''</span>
                        autorizado:<span class="hljs-literal">false</span>
                        user:
                                displayName:<span class="hljs-literal">false</span>
                                email:<span class="hljs-literal">false</span>
                                photoURL:<span class="hljs-literal">false</span>
                                telephone:<span class="hljs-literal">false</span>
                        atualizar: {}
                        modelos:
                                xls:
                                        cursos: xlsCursos
                                        estudantes: xlsEstudantes
                                        formularios: xlsFormularios
                                        matriculas: xlsMatriculas
                                        
                        formularios: formularios
                        matriculas: matriculas        
                        estudantes:estudantes
                        cursos:cursos
                }</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
